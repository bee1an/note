# 合成复用原则

> composite reuse principle

合成复用原则是指：**尽量使用合成/聚合的方式，而不是使用继承**。

继承的缺点:

1. 破坏了类的封装性, 父类会将实现细节暴露给子类, 父类对于子类是透明的, 这种复用又称为‘白箱’复用

2. 子类与父类的耦合度太高, 父类一旦修改, 子类也会跟着修改

3. 限制了复用的灵活性, 继承关系在编译时就已经确定, 无法再改变

组合的优点:

1. ‘黑箱’复用, 维持了类的封装性, 对于新对象来说, 成员对象的实现实现细节是不知道的

2. 耦合度低, 新对象可以在内部使用成员对象的抽象, 而不依赖具体的成员对象

3. 可以动态的决定复用, 灵活性高

假设我们要设计一个关于鸟的类。我们将“鸟”这样一个抽象的事物概念，定义为一个抽象类AbstractBird。所有更细分的鸟，比如麻雀、鸽子、乌鸦等，都继承这个抽象类。我们知道，大部分鸟都会飞，那我们可不可以在 AbstractBird抽象类中，定义一个fly()方法呢？

答案是否定的。尽管大部分鸟都会飞，但也有特例，比如鸵鸟就不会飞。鸵鸟继承具有fly()方法的父类，那鸵鸟就具有“飞”这样的行为，这显然不对。

如果根据鸟会不会这个特点单独抽离出来一个子类的话, 这样类型的子类会无比的多, 远不如使用接口的方式, 如果会飞的鸟则实现会飞的接口...

详情参考: [组合优于继承](https://mp.weixin.qq.com/s?__biz=MzI4Njc5NjM1NQ==&mid=2247508441&idx=2&sn=a59416f68f8b976bca15ace8201aecdc&chksm=eab20bd9b61c8c337489339134df8e35920d2ccb2778b8c8e76c71ba54b760a78cdc12066473#rd)
